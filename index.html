<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>הזמנות פרחים - השוזר</title>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

  <!-- Initialize Firebase -->
  <script>
    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyC2zCq88ENRnWsScjVgp2INp7vtnR8ck0M",
        authDomain: "hashozerdb.firebaseapp.com",
        projectId: "hashozerdb",
        databaseURL: "https://hashozerdb-default-rtdb.europe-west1.firebasedatabase.app",
        storageBucket: "hashozerdb.firebasestorage.app",
        messagingSenderId: "159442413900",
        appId: "1:159442413900:web:f1fe5222ee2ce9de1e47e9"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    // Add error logging for database connection
    db.ref('.info/connected').on('value', function(snap) {
      if (snap.val() === true) {
        console.log('Connected to Firebase Database');
      } else {
        console.log('Disconnected from Firebase Database');
      }
    }, function(error) {
      console.error('Firebase connection error:', error);
    });

    // Firebase paths
    const PATHS = {
      ITEMS: 'flower_items',
      FLOWERS: 'flower_types',
      EXPENSES: 'expenses',
      ORDERS: 'orders',
      CUSTOMERS: 'customers'
    };

    // Default flowers for initialization
    const defaultFlowers = {
      "ורדים": 10,
      "כלניות": 8,
      "נוריות": 7,
      "גרברות": 12
    };

    // Initialize customer autocomplete
    function initializeCustomerAutocomplete() {
      $("#customerName").autocomplete({
        source: function(request, response) {
          db.ref(PATHS.CUSTOMERS)
            .orderByChild('name')
            .startAt(request.term)
            .endAt(request.term + '\uf8ff')
            .once('value')
            .then((snapshot) => {
              const customers = [];
              snapshot.forEach((child) => {
                const customer = child.val();
                customers.push({
                  label: customer.name,
                  value: customer.name,
                  customer: customer
                });
              });
              response(customers);
            });
        },
        minLength: 2,
        select: function(event, ui) {
          const customer = ui.item.customer;
          document.getElementById('customerPhone').value = customer.phone || '';
          document.getElementById('customerAddress').value = customer.address || '';
          return false;
        }
      });
    }

    // Modify submitOrder to save customer details
    function submitOrder() {
      const name = document.getElementById('customerName').value.trim();
      const phone = document.getElementById('customerPhone').value.trim();
      const address = document.getElementById('customerAddress').value.trim();
      const deliveryDate = document.getElementById('deliveryDate').value;

      if (!name || !phone || !address || !deliveryDate || currentOrder.items.length === 0) {
        alert('נא למלא את כל פרטי ההזמנה');
        return;
      }

      // Show loading state
      const submitButton = document.querySelector('button[onclick="submitOrder()"]');
      const originalText = submitButton.innerHTML;
      submitButton.innerHTML = 'שומר...';
      submitButton.disabled = true;

      // Save or update customer details
      const customerKey = name.toLowerCase().replace(/[^a-z0-9]/g, '_');
      const customerData = {
        name,
        phone,
        address,
        lastOrderDate: new Date().toISOString(),
        updatedAt: new Date().toISOString()
      };

      // Create the order object
      const newOrder = {
        ...currentOrder,
        customer: customerData,
        deliveryDate,
        orderDate: new Date().toISOString(),
        status: 'new',
        createdBy: auth.currentUser.email
      };

      // Save both customer and order
      Promise.all([
        db.ref(`${PATHS.CUSTOMERS}/${customerKey}`).set(customerData),
        db.ref(PATHS.ORDERS).push(newOrder)
      ])
        .then(() => {
          console.log('Order and customer saved successfully');
          // Reset form
          document.getElementById('customerName').value = '';
          document.getElementById('customerPhone').value = '';
          document.getElementById('customerAddress').value = '';
          document.getElementById('deliveryDate').value = '';
          currentOrder = { items: [], total: 0 };
          updateOrderItemsList();
          
          alert('ההזמנה נשמרה בהצלחה!');
        })
        .catch((error) => {
          console.error('Error submitting order:', error);
          alert('שגיאה בשמירת ההזמנה: ' + error.message);
        })
        .finally(() => {
          submitButton.innerHTML = originalText;
          submitButton.disabled = false;
        });
    }

    // Add customer autocomplete initialization to loadInitialData
    function loadInitialData() {
      try {
        // Load all initial data
        loadFlowerTypes();
        updateExpensesList();
        initializeOrderAutocomplete();
        initializeCustomerAutocomplete();
        // Generate report last, when all other data is loaded
        setTimeout(() => {
          generateReport();
        }, 1000);
      } catch (error) {
        console.error('Error loading initial data:', error);
      }
    }
  </script>
  <style>
    /* Splash Screen Styles */
    #splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100vw;
      width: 100dvw;
      height: 100vh;
      height: 100dvh;
      background: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
      margin: 0;
      padding: 0;
      overflow: hidden;
      box-sizing: border-box;
      -webkit-box-sizing: border-box;
    }

    .container {
      display: none; /* Hide container initially */
    }

    .container.show {
      display: block; /* Show container when class is added */
    }

    #splash-screen.fade-out {
      opacity: 0;
      transform: scale(1.1);
      pointer-events: none;
    }

    #splash-screen img {
      width: 150px;
      height: auto;
      margin-bottom: 20px;
      animation: pulse 2s infinite;
      -webkit-user-select: none;
      user-select: none;
    }

    #splash-screen h1 {
      font-size: 2rem;
      color: #2c3e50;
      margin: 0;
      padding: 0;
      text-align: center;
      width: 100%;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @media (max-width: 600px) {
      #splash-screen {
        padding: 0;
        min-height: -webkit-fill-available;
        min-width: -webkit-fill-available;
        width: 100%;
        width: 100dvw;
        height: 100%;
        height: 100dvh;
        position: fixed;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: 0;
        border: 0;
      }
      
      #splash-screen img {
        width: 120px;
        margin-bottom: 16px;
      }
      
      #splash-screen h1 {
        font-size: 1.5rem;
        padding: 0 20px;
        width: 100%;
        box-sizing: border-box;
      }
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      direction: rtl;
      font-size: 16px;
      line-height: 1.5;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      padding: 1rem;
    }
    .item-form, .report-section {
      background: #f9f9f9;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      border-radius: 0.75rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .flex-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
      padding: 0 0.5rem;
    }
    .flex-row > * {
      flex: 1 1 200px;
    }
    input, select, button {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 0.5rem;
      font-size: 1rem;
      box-sizing: border-box;
    }
    button {
      background: #2c3e50;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.2s;
      min-height: 44px; /* For better touch targets */
    }
    button:hover {
      background: #34495e;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 12px 8px;
      text-align: right;
    }
    th {
      background-color: #f5f5f5;
    }
    .summary {
      font-weight: bold;
      color: #2c3e50;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 2px solid #eee;
    }
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.5);
      padding: 0;
    }
    .modal-content {
      background-color: #fefefe;
      margin: 10px auto;
      padding: 20px;
      border-radius: 0.75rem;
      width: 90%;
      max-width: 600px;
      position: relative;
    }
    .close {
      position: absolute;
      right: 20px;
      top: 10px;
      color: #666;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      padding: 0 8px;
    }
    /* Mobile-specific styles */
    @media (max-width: 600px) {
      body {
        font-size: 14px;
      }
      .container {
        padding: 0.5rem 1rem;
      }
      .item-form, .report-section {
        padding: 1.25rem;
        margin: 0 0.5rem 1rem 0.5rem;
        border-radius: 0.5rem;
      }
      .flex-row {
        flex-direction: column;
        gap: 0.5rem;
        padding: 0 0.75rem;
      }
      .flex-row > * {
        flex: 1 1 auto;
      }
      input, select, button {
        padding: 0.8rem;
        font-size: 16px; /* Prevent zoom on iOS */
        margin: 0.25rem 0;
      }
      table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }
      th, td {
        padding: 8px;
      }
      .modal-content {
        margin: 0;
        width: 100%;
        height: 100%;
        border-radius: 0;
      }
      h1 {
        font-size: 1.5rem;
        margin: 1rem 0;
      }
      h2 {
        font-size: 1.25rem;
      }
      #ingredientsList {
        padding-right: 20px;
      }
      .ui-autocomplete {
        max-height: 50vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }
      .header-container h1 {
        font-size: 1.3rem;
      }
      .settings-button {
        margin: 0;
      }
    }
    .header-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      position: relative;
      padding: 0 1rem;
    }
    .header-container h1 {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      margin: 0;
      text-align: center;
    }
    .header-container img {
      width: 44px;
      height: 44px;
      object-fit: contain;
    }
    .settings-button {
      background: transparent;
      color: #2c3e50;
      width: auto;
      min-width: 44px;
      height: 44px;
      padding: 0.5rem;
      margin: 0;
      border: 1px solid #ddd;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    .settings-button:hover {
      background: #f5f5f5;
      color: #2c3e50;
      transform: rotate(30deg);
    }
    .settings-button i {
      font-size: 1.2rem;
    }
    .button-group {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding: 0 0.5rem;
    }
    .button-group button {
      flex: 0 0 auto;
    }
    .print-button {
      background: #2c3e50;
      color: white;
      width: auto;
      min-width: 44px;
      height: 44px;
      padding: 0.5rem;
      margin: 0;
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    .print-button:hover {
      background: #34495e;
      transform: scale(1.1);
    }
    .print-button i {
      font-size: 1.2rem;
    }
    .reset-button {
      background: #e74c3c;
    }
    .button-group i {
      font-size: 1.1rem;
    }
    @media (max-width: 600px) {
      .button-group {
        padding: 0 0.75rem;
      }
      .button-group button {
        padding: 0.8rem 0.5rem;
      }
    }
    /* New styles for tabs and order section */
    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid #eee;
      padding: 0 0.5rem;
    }
    
    .tab {
      /* padding: 1rem 2rem; */
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
      color: #666;
      cursor: pointer;
      font-weight: 500;
    }
    
    .tab.active {
      color: #cad3db;
      border-bottom: 2px solid #2c3e50;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }

    .order-items {
      margin: 1rem 0;
      border: 1px solid #eee;
      border-radius: 0.5rem;
      padding: 1rem;
    }

    .order-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.5rem;
      border-bottom: 1px solid #eee;
    }

    .order-item:last-child {
      border-bottom: none;
    }

    .order-item-actions {
      display: flex;
      gap: 0.5rem;
    }

    .order-item-actions button {
      width: auto;
      padding: 0.5rem;
      min-height: auto;
    }

    .discount-input {
      width: 80px;
      text-align: center;
    }

    footer {
      margin-top: 2rem;
      padding: 1rem;
      text-align: center;
      background: #f9f9f9;
      border-top: 1px solid #eee;
    }

    .main-content {
      min-height: calc(100vh - 200px);
    }

    /* Ingredient list styles */
    #ingredientsList {
      list-style: none;
      padding: 0;
      margin: 1rem 0;
    }

    #ingredientsList li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem;
      border-bottom: 1px solid #eee;
    }

    #ingredientsList li:last-child {
      border-bottom: none;
    }

    #ingredientsList button {
      background: transparent;
      border: none;
      color: #e74c3c;
      width: auto;
      min-width: 32px;
      height: 32px;
      padding: 0.25rem;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #ingredientsList button:hover {
      background: #f8d7da;
      border-radius: 50%;
    }

    .report-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .report-header h2 {
      margin: 0;
    }

    .report-header .button-group {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="splash-screen">
    <img src="logo.png" alt="השוזר">
    <h1>השוזר - ניהול</h1>
  </div>
  <div class="container">
    <div class="header-container">
      <img src="logo.png" alt="השוזר">
      <h1>ניהול הזמנות - השוזר</h1>
      <button id="settingsButton" class="settings-button" title="הגדרות">
        <i class="fas fa-cog"></i>
      </button>
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="orders">הזמנות חדשות</button>
      <button class="tab" data-tab="items">ניהול פריטים</button>
      <button class="tab" data-tab="expenses">הוצאות</button>
      <button class="tab" data-tab="reports">דוחות</button>
    </div>

    <div class="main-content">
      <!-- Orders Tab -->
      <div id="orders" class="tab-content active">
        <div class="item-form">
          <h2>הזמנה חדשה</h2>
          <div class="flex-row">
            <input id="customerName" placeholder="שם הלקוח" />
            <input id="customerPhone" placeholder="טלפון" type="tel" />
          </div>
          <div class="flex-row">
            <input id="customerAddress" placeholder="כתובת למשלוח" />
            <input id="deliveryDate" type="datetime-local" placeholder="תאריך ושעת משלוח" />
          </div>
          <div class="flex-row">
            <input id="orderItemInput" placeholder="חפש פריט להוספה" />
            <button onclick="addItemToOrder()">הוסף פריט</button>
          </div>
          <div class="order-items" id="orderItemsList">
            <!-- Order items will be added here dynamically -->
          </div>
          <div class="summary" id="orderSummary">
            סה"כ: 0 ₪
          </div>
          <button onclick="submitOrder()">שמור הזמנה</button>
        </div>
      </div>

      <!-- Items Tab -->
      <div id="items" class="tab-content">
        <div class="item-form">
          <h2>פריט חדש</h2>
          <div class="flex-row">
            <input id="itemName" placeholder="שם מוצר (למשל: זר אהבה)" />
            <input id="itemPrice" type="number" placeholder="מחיר" />
          </div>
          <div class="flex-row">
            <input id="flowerInput" placeholder="בחר סוג פרח" />
            <input id="flowerQty" type="number" placeholder="כמות" />
            <button onclick="addIngredient()">הוסף פרח</button>
          </div>
          <ul id="ingredientsList"></ul>
          <button onclick="submitItem()">שמור פריט</button>
        </div>
      </div>

      <!-- Expenses Tab -->
      <div id="expenses" class="tab-content">
        <div class="item-form">
          <h2>הוצאה חדשה</h2>
          <div class="flex-row">
            <input id="expenseName" placeholder="שם ההוצאה" />
            <input id="expenseAmount" type="number" placeholder="סכום" />
          </div>
          <button onclick="submitExpense()">הוסף הוצאה</button>
        </div>
        <div class="report-section">
          <h3>הוצאות השבוע</h3>
          <div id="expensesList"></div>
        </div>
      </div>

      <!-- Reports Tab -->
      <div id="reports" class="tab-content">
        <div class="report-section">
          <div class="report-header">
            <h2>דוח שבועי</h2>
            <div class="button-group">
              <button onclick="printReport()" class="print-button">
                <i class="fas fa-print"></i>
              </button>
            </div>
          </div>
          <div id="reportOutput"></div>
        </div>
      </div>
    </div>

    <footer>
      <p>© 2024 השוזר - כל הזכויות שמורות</p>
    </footer>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>ניהול סוגי פרחים</h2>
        <div class="flex-row">
          <input id="newFlowerType" placeholder="הוסף סוג פרח חדש" />
          <input id="newFlowerPrice" type="number" placeholder="מחיר ליחידה" />
          <button onclick="addNewFlowerType()">הוסף</button>
        </div>
        <table id="flowerTypeList">
          <thead>
            <tr>
              <th>סוג פרח</th>
              <th>מחיר ליחידה</th>
              <th>פעולות</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    // Splash screen handler
    window.addEventListener('load', function() {
      const container = document.querySelector('.container');
      setTimeout(function() {
        document.getElementById('splash-screen').classList.add('fade-out');
        setTimeout(function() {
          document.getElementById('splash-screen').style.display = 'none';
          container.classList.add('show');
          
          // Initialize Firebase Auth UI
          initAuth();
        }, 500);
      }, 1500);
    });

    // Auth initialization
    function initAuth() {
      // Enable persistent login
      auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL)
        .then(() => {
          // Check if user is already signed in
          auth.onAuthStateChanged((user) => {
            if (user) {
              // Show the container first
              const container = document.querySelector('.container');
              container.style.display = 'block';
              // Hide the splash screen
              const splashScreen = document.getElementById('splash-screen');
              if (splashScreen) {
                splashScreen.style.display = 'none';
              }
              // Initialize all components
              $(document).ready(() => {
                loadInitialData();
              });
            } else {
              // Show login form
              showLoginForm();
            }
          });
        })
        .catch((error) => {
          console.error('Error setting auth persistence:', error);
          alert('שגיאה בהגדרת התחברות מתמשכת: ' + error.message);
        });
    }

    function showLoginForm() {
      const loginHtml = `
        <div id="login-form" style="max-width: 400px; margin: 2rem auto; padding: 2rem; background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <h2 style="text-align: center; margin-bottom: 2rem;">כניסה למערכת</h2>
          <div style="margin-bottom: 1rem;">
            <input type="email" id="login-email" placeholder="אימייל" style="width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 4px;">
            <input type="password" id="login-password" placeholder="סיסמה" style="width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 4px;">
          </div>
          <button onclick="login()" style="width: 100%; padding: 0.75rem; background: #2c3e50; color: white; border: none; border-radius: 4px; cursor: pointer;">כניסה</button>
        </div>
      `;
      document.querySelector('.container').innerHTML = loginHtml;
    }

    async function login() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      // Show loading state
      const loginButton = document.querySelector('button[onclick="login()"]');
      const originalText = loginButton.innerHTML;
      loginButton.innerHTML = 'מתחבר...';
      loginButton.disabled = true;
      
      try {
        await auth.signInWithEmailAndPassword(email, password);
        // Reload the page to ensure proper initialization
        location.reload();
      } catch (error) {
        console.error('Login error:', error);
        alert('שגיאה בהתחברות: ' + error.message);
        loginButton.innerHTML = originalText;
        loginButton.disabled = false;
      }
    }

    function loadInitialData() {
      try {
        // Load all initial data
        loadFlowerTypes();
        updateExpensesList();
        initializeOrderAutocomplete();
        initializeCustomerAutocomplete();
        // Generate report last, when all other data is loaded
        setTimeout(() => {
          generateReport();
        }, 1000);
      } catch (error) {
        console.error('Error loading initial data:', error);
      }
    }

    // Firebase data operations
    function loadFlowerTypes() {
      db.ref(PATHS.FLOWERS).once('value', (snapshot) => {
        const flowers = snapshot.val() || defaultFlowers;
        if (!snapshot.exists()) {
          // Initialize with default flowers if none exist
          db.ref(PATHS.FLOWERS).set(defaultFlowers);
        }
        updateFlowerTypeList();
        initializeAutocomplete();
      });
    }

    function addNewFlowerType() {
      const newType = document.getElementById('newFlowerType').value.trim();
      const newPrice = parseFloat(document.getElementById('newFlowerPrice').value);
      
      if (!newType || isNaN(newPrice) || newPrice <= 0) {
        alert('נא להזין שם פרח ומחיר תקין');
        return;
      }

      // Show loading state
      const addButton = document.querySelector('button[onclick="addNewFlowerType()"]');
      const originalText = addButton.innerHTML;
      addButton.innerHTML = 'מוסיף...';
      addButton.disabled = true;

      db.ref(`${PATHS.FLOWERS}/${newType}`).once('value', (snapshot) => {
        if (snapshot.exists()) {
          alert('פרח זה כבר קיים במערכת');
          addButton.innerHTML = originalText;
          addButton.disabled = false;
          return;
        }

        db.ref(`${PATHS.FLOWERS}/${newType}`).set(newPrice)
          .then(() => {
            document.getElementById('newFlowerType').value = '';
            document.getElementById('newFlowerPrice').value = '';
            updateFlowerTypeList();
            initializeAutocomplete();
            alert('הפרח נוסף בהצלחה!');
          })
          .catch((error) => {
            console.error('Error saving flower:', error);
            alert('שגיאה בשמירת הפרח: ' + error.message);
          })
          .finally(() => {
            addButton.innerHTML = originalText;
            addButton.disabled = false;
          });
      });
    }

    function deleteFlowerType(type) {
      if (confirm(`האם למחוק את הפרח "${type}"?`